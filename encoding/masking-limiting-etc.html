
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Masking, Limiting, and Related Functions Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-image-captions/image-captions.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-term/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="resampling.html" />
    
    
    <link rel="prev" href="scenefiltering.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Overview</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../CONTRIBUTING.html">
            
                <a href="../CONTRIBUTING.html">
            
                    
                    Contributing to the Guide
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../overview/preface.html">
            
                <a href="../overview/preface.html">
            
                    
                    Preface
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../overview/roles.html">
            
                <a href="../overview/roles.html">
            
                    
                    Roles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../overview/requirements.html">
            
                <a href="../overview/requirements.html">
            
                    
                    Requirements
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Encoding</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="preparation.html">
            
                <a href="preparation.html">
            
                    
                    Preparations and Necessary Software
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="basics-and-workflow.html">
            
                <a href="basics-and-workflow.html">
            
                    
                    Basics and General Workflow
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="video-artifacts.html">
            
                <a href="video-artifacts.html">
            
                    
                    Recognizing Video Artifacts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="scenefiltering.html">
            
                <a href="scenefiltering.html">
            
                    
                    Scenefiltering
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="2.5" data-path="masking-limiting-etc.html">
            
                <a href="masking-limiting-etc.html">
            
                    
                    Masking, Limiting, and Related Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="resampling.html">
            
                <a href="resampling.html">
            
                    
                    Resampling
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="video-encoding.html">
            
                <a href="video-encoding.html">
            
                    
                    Codecs
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Typesetting</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../typesetting/aegisub.html">
            
                <a href="../typesetting/aegisub.html">
            
                    
                    Aegisub and Other Tools
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Resources and References</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../archived-websites/bt601-vs-bt709.html">
            
                <a href="../archived-websites/bt601-vs-bt709.html">
            
                    
                    Colorspaces
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Masking, Limiting, and Related Functions</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="masking-limiting-and-related-functions"><a name="masking-limiting-and-related-functions" class="plugin-anchor" href="#masking-limiting-and-related-functions"><i class="fa fa-link" aria-hidden="true"></i></a>Masking, Limiting, and Related Functions</h1>
<p>There are filters,
which changes the video in various ways,
and then there are ways to change the filtering itself.
There are likely hundreds of different techniques at your disposal
for various situations,
using masks to protect details from smoothing filters,
blending two clips with different filtering applied,
and countless others&#x2014;many of which haven&apos;t been thought of yet.
This article will cover:</p>
<ul>
<li>Masking and Merging</li>
<li>Limiting</li>
<li>Reference clips</li>
<li>Expressions and Lookup Tables</li>
<li>Runtime functions</li>
<li>Prefiltering</li>
</ul>
<h2 id="masking"><a name="masking" class="plugin-anchor" href="#masking"><i class="fa fa-link" aria-hidden="true"></i></a>Masking</h2>
<p>Masking refers to a broad set of techniques used to merge multiple clips,
usually one filtered clip merged with a source clip
according to an overlay mask.
A mask clip may contain any information
generated from a pixel-wise operation.
Vapoursynth includes some basic tools for manipulating masks as well:</p>
<p><a href="http://www.vapoursynth.com/doc/functions/minimum_maximum.html" target="_blank"><strong>std.Minimum/std.Maximum</strong></a></p>
<p>TODO</p>
<p><a href="http://www.vapoursynth.com/doc/functions/deflate_inflate.html" target="_blank"><strong>std.Inflate/std.Deflate</strong></a></p>
<p>TODO</p>
<p><a href="http://www.vapoursynth.com/doc/functions/binarize.html" target="_blank"><strong>std.Binarize</strong></a></p>
<p>Split the luma/chroma values of any clip into one of two values,
according to a fixed threshold.
For instance,
binarize an edgemask to white when edge values are at or above 24,
and set values lower to 0:</p>
<pre><code class="lang-py">mask.std.Binarize(<span class="hljs-number">24</span>, v0=<span class="hljs-number">0</span>, v1=<span class="hljs-number">255</span>)
</code></pre>
<p>For methods of creating mask clips,
there are a few general categories&#x2026;</p>
<h3 id="line-masks"><a name="line-masks" class="plugin-anchor" href="#line-masks"><i class="fa fa-link" aria-hidden="true"></i></a>Line masks</h3>
<p>These are used for normal edge detection,
which is useful for processing edges or the area around them,
like anti-aliasing and deringing.
The traditional edge detection technique is
to apply one or more convolutions,
focused in different directions,
to create a clip containing what you might call a gradient vector map,
or more simply a clip which has brighter values in pixels
where the neighborhood dissimilarity is higher.
The main ones I would recommend would be Prewitt (core),
Sobel (core),
and kirsch (kagefunc).</p>
<p>There are also some edge detection methods that use prefiltering
when generating the mask.
The most common of these would be TCanny,
which applies a gaussian blur before creating a 1-pixel-thick Sobel mask.
The most noteworthy pre-processed edge mask would be kagefunc&apos;s
retinex_edgemask filter,
which at least with cartoons and anime,
is unmatched in its accuracy.
This is the mask to use if you want edge
masking with ALL of the edges and nothing BUT the edges.</p>
<p>One more edge mask worth mentioning is the mask in dehalohmod,
which is a black-lineart mask well-suited to dehalo masking.
Internally it uses a mask called a Camembert to generate a larger mask
and limits it to the area affected by a line-darkening script.
The main mask has no name and is simply dhhmask(mode=3).</p>
<p>Example: Build a simple dehalo mask</p>
<pre><code class="lang-py"><span class="hljs-comment">#black line mask</span>
mask = zz.dhhmask(src)

<span class="hljs-comment">#grow mask to cover halos</span>
mask_outer = kgf.iterate(mask, core.std.Maximum, <span class="hljs-number">3</span>)

<span class="hljs-comment">#extend a bit and shrink back to exclude close, adjacent lines</span>
mask_inner = core.std.Maximum(mask_outer)
mask_inner = kgf.iterate(mask_inner, core.std.Minimum ,<span class="hljs-number">4</span>)

halos = core.std.Expr([mask_outer, mask_inner], <span class="hljs-string">&apos;x y -&apos;</span>)
</code></pre>
<p>I would also lump the range mask
(or in masktools,
the &quot;min/max&quot; mask)
into this category,
which is a very simple masking method that
returns a clip made up of the maximum value of a range of neighboring pixels
minus the minimum value of the range,
as so:</p>
<pre><code class="lang-py">clipmax = core.std.Maximum(clip)
clipmin = core.std.Minimum(clip)

minmax = core.std.Expr([clipmax, clipmin], <span class="hljs-string">&apos;x y -&apos;</span>)
</code></pre>
<p>The most common use of this mask is within GradFun3.
In theory,
the neighborhood variance technique is the perfect fit for a debanding mask.
Banding is the result of 8 bit color limits,
so we mask any pixel with a neighbor higher or lower than one 8 bit color step,
thus masking everything except potential banding.\
But alas,
grain induces false positives
and legitimate details within a single color step are smoothed out,
therefore debanding will forever be a balancing act between
detail loss and residual artifacts.</p>
<h3 id="diff-masks"><a name="diff-masks" class="plugin-anchor" href="#diff-masks"><i class="fa fa-link" aria-hidden="true"></i></a>Diff masks</h3>
<p>A diff(erence) mask is any mask clip
generated using the variance of two clips.
There are many different ways to use this type of mask,
from limiting a difference to a threshold,
processing a filtered difference itself,
or smoothing &#x2192;
processing the clean clip &#x2192;
overlaying the original grain.
They can also be used in conjunction with
line masks,
for example:
kagefunc&apos;s hardsubmask uses a special edge mask with a diff mask,
and uses core.misc.Hysteresis to grow the line mask into diff mask.</p>
<p>Example: Create a descale mask for white non-fading credits with extra
protection for lines (16 bit input)</p>
<pre><code class="lang-py">src16 = kgf.getY(last)
src32 = fvf.Depth(src16, <span class="hljs-number">32</span>)

standard_scale = core.resize.Spline36(last, <span class="hljs-number">1280</span>, <span class="hljs-number">720</span>, format=vs.YUV444P16, resample_filter_uv=<span class="hljs-string">&apos;spline16&apos;</span>)

inverse_scale = core.descale.Debicubic(src32, <span class="hljs-number">1280</span>, <span class="hljs-number">720</span>)
inverse_scale = fvf.Depth(inverse_scale, <span class="hljs-number">16</span>)

<span class="hljs-comment">#absolute error of descaling</span>
error = core.resize.Bicubic(inverse_scale, <span class="hljs-number">1920</span>, <span class="hljs-number">1080</span>)
error = core.std.Expr([src, error], <span class="hljs-string">&apos;x y - abs&apos;</span>)

<span class="hljs-comment">#create a light error mask to protect smaller spots against halos aliasing and rings</span>
error_light = core.std.Maximum(error, coordinates=[<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>])
error_light = core.std.Expr(error_light, <span class="hljs-string">&apos;65535 x 1000 / /&apos;</span>)
error_light = core.resize.Spline36(error_light, <span class="hljs-number">1280</span>, <span class="hljs-number">720</span>)

<span class="hljs-comment">#create large error mask for credits, limiting the area to white spots</span>
<span class="hljs-comment">#masks are always full-range, so manually set fulls/fulld to True or range_in/range to 1 when changing bitdepth</span>
credits = core.std.Expr([src16, error], <span class="hljs-string">&apos;x 55800 &amp;gt; y 2500 &amp;gt; and 255 0 ?&apos;</span>, vs.GRAY8)
credits = core.resize.Bilinear(credits, <span class="hljs-number">1280</span>, <span class="hljs-number">720</span>)
credits = core.std.Maximum(credits).std.Inflate().std.Inflate()
credits = fvf.Depth(credits, <span class="hljs-number">16</span>, range_in=<span class="hljs-number">1</span>, range=<span class="hljs-number">1</span>)

descale_mask = core.std.Expr([error_light, credits], <span class="hljs-string">&apos;x y -&apos;</span>)

output = kgf.getY(standard_scale).std.MaskedMerge(inverse_scale, descale_mask)
output = muvf.MergeChroma(output, standard_scale)
</code></pre>
<h2 id="single-and-multi-clip-adjustments-with-stdexpr-and-friends"><a name="single-and-multi-clip-adjustments-with-stdexpr-and-friends" class="plugin-anchor" href="#single-and-multi-clip-adjustments-with-stdexpr-and-friends"><i class="fa fa-link" aria-hidden="true"></i></a>Single and multi-clip adjustments with std.Expr and friends</h2>
<p>Vapoursynth&apos;s core contains many such filters,
which can manipulate one to three different clips according to a math function.
Most, if not all,
can be done (though possibly slower) using std.Expr,
which I will
cover at the end of this
sub-section.</p>
<p><a href="http://www.vapoursynth.com/doc/functions/makediff.html" target="_blank"><code>std.MakeDiff</code></a>
and <a href="http://www.vapoursynth.com/doc/functions/mergediff.html" target="_blank"><code>std.MergeDiff</code></a></p>
<p>Subtract or add the difference of two clips, respectively.
These filters are peculiar in that they work differently in
integer and float formats,
so for more complex filtering
float is recommended whenever possible.
In 8 bit integer format where neutral luminance (gray) is 128,
the function is <code>clip1 - clip2 + 128</code> for MakeDiff
and <code>clip1 + clip2 - 128</code> for MergeDiff,
so pixels with no change will be gray.</p>
<p>The same is true of 16 bit and 32768.
The float version is simply <code>clip1 - clip2</code> so in 32 bit
the difference is defined normally,
negative for dark differences,
positive for bright differences,
and null differences are zero.</p>
<p>Since overflowing values are clipped to 0 and 255,
changes greater than 128 will be clipped as well.
This can be worked around by re-defining the input clip as so:</p>
<pre><code class="lang-py">smooth = core.bilateral.Bilateral(sigmaS=<span class="hljs-number">6.4</span>, sigmaR=<span class="hljs-number">0.009</span>)
noise = core.std.MakeDiff(src, smooth) <span class="hljs-comment"># subtract filtered clip from source leaving the filtered difference</span>
smooth = core.std.MakeDiff(src, noise) <span class="hljs-comment"># subtract diff clip to prevent clipping (doesn&apos;t apply to 32 bit)</span>
</code></pre>
<p><a href="http://www.vapoursynth.com/doc/functions/merge.html" target="_blank"><strong>std.Merge</strong></a></p>
<p>TODO</p>
<p><strong><a href="http://www.vapoursynth.com/doc/functions/maskedmerge.html" target="_blank">std.MaskedMerge</a></strong></p>
<p>TODO</p>
<p><a href="http://www.vapoursynth.com/doc/functions/expr.html" target="_blank"><strong>std.Expr</strong></a></p>
<p>TODO</p>
<p><a href="http://www.vapoursynth.com/doc/functions/lut.html" target="_blank"><strong>std.Lut</strong></a> and
<a href="http://www.vapoursynth.com/doc/functions/lut2.html" target="_blank"><strong>std.Lut2</strong></a></p>
<p>May be slightly faster than Expr in some cases,
otherwise they can&apos;t really do anything that Expr can&apos;t.
You can substitute a normal Python function for the RPN expression, though,
so you may still find it easier.
See link for usage information.</p>
<h2 id="limiting"><a name="limiting" class="plugin-anchor" href="#limiting"><i class="fa fa-link" aria-hidden="true"></i></a>Limiting</h2>
<p> TODO</p>
<h2 id="referencing"><a name="referencing" class="plugin-anchor" href="#referencing"><i class="fa fa-link" aria-hidden="true"></i></a>Referencing</h2>
<p> TODO - probably just merge with &quot;Limiting&quot;</p>
<h2 id="runtime-filtering-with-frameeval"><a name="runtime-filtering-with-frameeval" class="plugin-anchor" href="#runtime-filtering-with-frameeval"><i class="fa fa-link" aria-hidden="true"></i></a>Runtime filtering with FrameEval</h2>
<p> TODO</p>
<p>Example: Strong smoothing on scene changes (i.e. for MPEG-2 transport
streams)</p>
<pre><code class="lang-py"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> partial

src = core.d2v.Source()
src = ivtc(src)
src = haf.Deblock_QED(src)

ref = core.rgvs.RemoveGrain(src, <span class="hljs-number">2</span>)

<span class="hljs-comment"># xvid analysis is better in lower resolutions</span>
first = core.resize.Bilinear(ref, <span class="hljs-number">640</span>, <span class="hljs-number">360</span>).wwxd.WWXD()
last = core.std.DuplicateFrames(first, src.num_frames - <span class="hljs-number">1</span>).std.DeleteFrames(<span class="hljs-number">0</span>)

<span class="hljs-comment"># copy prop to last frame of previous scene</span>
propclip = core.std.ModifyFrame(first, clips=[first, last], selector=shiftback)

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">shiftback</span><span class="hljs-params">(n, f)</span>:</span>
    both = f[<span class="hljs-number">0</span>].copy()
     <span class="hljs-keyword">if</span> f[<span class="hljs-number">1</span>].props.SceneChange == <span class="hljs-number">1</span>:
         both.props.SceneChange = <span class="hljs-number">1</span>
    <span class="hljs-keyword">return</span> both

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">scsmooth</span><span class="hljs-params">(n, f, clip, ref)</span>:</span>
    <span class="hljs-keyword">if</span> f.props.SceneChange == <span class="hljs-number">1</span>:
        clip = core.dfttest.DFTTest(ref, tbsize=<span class="hljs-number">1</span>)
    <span class="hljs-keyword">return</span> clip

out = core.std.FrameEval(src, partial(scsmooth, clip=src, ref=ref), prop_src=propclip)
</code></pre>
<h2 id="prefilters"><a name="prefilters" class="plugin-anchor" href="#prefilters"><i class="fa fa-link" aria-hidden="true"></i></a>Prefilters</h2>
<p>TODO</p>
<p>Example: Deband a grainy clip with f3kdb (16 bit input)</p>
<pre><code class="lang-py">src16 = last
src32 = fvf.Depth(last, <span class="hljs-number">32</span>)

<span class="hljs-comment"># I really need to finish zzfunc.py :&amp;lt;</span>
minmax = zz.rangemask(src16, rad=<span class="hljs-number">1</span>, radc=<span class="hljs-number">0</span>)

<span class="hljs-comment">#8-16 bit MakeDiff and MergeDiff are limited to 50% of full-range, so float is used here</span>
clean = core.std.Convolution(src32, [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>]).std.Convolution([<span class="hljs-number">1</span>]*<span class="hljs-number">9</span>, planes=[<span class="hljs-number">0</span>])
grain = core.std.Expr([src32, clean32], <span class="hljs-string">&apos;x y - 0.5 +&apos;</span>)

clean = fvf.Depth(clean, <span class="hljs-number">16</span>)
deband =core.f3kdb.Deband(clean, <span class="hljs-number">16</span>, <span class="hljs-number">40</span>, <span class="hljs-number">40</span>, <span class="hljs-number">40</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, keep_tv_range=<span class="hljs-keyword">True</span>, output_depth=<span class="hljs-number">16</span>)

<span class="hljs-comment">#limit the debanding: f3kdb becomes very strong on the smoothed clip (or rather, becomes more efficient)</span>
<span class="hljs-comment">#adapt strength according to a neighborhood-similarity mask, steadily decreasing strength in more detailed areas</span>
limited = zz.AdaptiveLimitFilter(deband, clean, mask=minmax, thr1=<span class="hljs-number">0.3</span>, thr2=<span class="hljs-number">0.0</span>, mthr1=<span class="hljs-number">400</span>, mthr2=<span class="hljs-number">700</span>, thrc=<span class="hljs-number">0.25</span>)

output = fvf.Depth(limited, <span class="hljs-number">32</span>).std.MergeDiff(grain)
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="scenefiltering.html" class="navigation navigation-prev " aria-label="Previous page: Scenefiltering">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="resampling.html" class="navigation navigation-next " aria-label="Next page: Resampling">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Masking, Limiting, and Related Functions","level":"2.5","depth":1,"next":{"title":"Resampling","level":"2.6","depth":1,"path":"encoding/resampling.md","ref":"encoding/resampling.md","articles":[]},"previous":{"title":"Scenefiltering","level":"2.4","depth":1,"path":"encoding/scenefiltering.md","ref":"encoding/scenefiltering.md","articles":[]},"dir":"ltr"},"config":{"plugin_comments":{"anchors":"adds anchors (and links) to headings","code":"adds line numbers and copy buttons","edit-link":"link to edit page on github in top bar","image-captions":"turns images into figures","term":"{% term %} blocks with different highlighting and copy buttons per command, not whole output"},"plugins":["anchors","code","edit-link","image-captions","term"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"search":{},"term":{"copyButtons":true,"fade":false,"lineStyles":true,"prompt":"(?<prompt>[^\\$^#^:]*)(?<pathsep>:?)(?<path>[^\\$^#]*?)(?<delimiter>[\\$#] )(?<command>.*)$","style":"default"},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"code":{"copyButtons":true},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/Irrational-Encoding-Wizardry/guide.encode.moe/edit/master/"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{},"image-captions":{"caption":"Image _PAGE_LEVEL_._PAGE_IMAGE_NUMBER_ - _CAPTION_","variable_name":"_pictures"}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{"_pictures":[{"backlink":"overview/roles.html#fig1.4.1","level":"1.4","list_caption":"Figure: \\[DameDesuYo\\] Eromanga-sensei - 01 (1920x1080 10bit AAC) \\[05CB518E\\].mkv\\_snapshot\\_03.11\\_\\[2017.08.18\\_21.14.55\\].jpg","alt":"\\[DameDesuYo\\] Eromanga-sensei - 01 (1920x1080 10bit AAC) \\[05CB518E\\].mkv\\_snapshot\\_03.11\\_\\[2017.08.18\\_21.14.55\\].jpg","nro":1,"url":"images/cnvimage100.png","index":1,"caption_template":"Image _PAGE_LEVEL_._PAGE_IMAGE_NUMBER_ - _CAPTION_","label":"\\[DameDesuYo\\] Eromanga-sensei - 01 (1920x1080 10bit AAC) \\[05CB518E\\].mkv\\_snapshot\\_03.11\\_\\[2017.08.18\\_21.14.55\\].jpg","attributes":{},"skip":false,"key":"1.4.1"},{"backlink":"overview/roles.html#fig1.4.2","level":"1.4","list_caption":"Figure: \\[DameDesuYo\\] Eromanga-sensei - 01 (1920x1080 10bit AAC) \\[05CB518E\\].mkv\\_snapshot\\_03.11\\_\\[2017.08.18\\_21.14.43\\].jpg","alt":"\\[DameDesuYo\\] Eromanga-sensei - 01 (1920x1080 10bit AAC) \\[05CB518E\\].mkv\\_snapshot\\_03.11\\_\\[2017.08.18\\_21.14.43\\].jpg","nro":2,"url":"images/cnvimage101.png","index":2,"caption_template":"Image _PAGE_LEVEL_._PAGE_IMAGE_NUMBER_ - _CAPTION_","label":"\\[DameDesuYo\\] Eromanga-sensei - 01 (1920x1080 10bit AAC) \\[05CB518E\\].mkv\\_snapshot\\_03.11\\_\\[2017.08.18\\_21.14.43\\].jpg","attributes":{},"skip":false,"key":"1.4.2"},{"backlink":"encoding/preparation.html#fig2.1.1","level":"2.1","list_caption":"Figure: The main window of VSEdit.","alt":"The main window of VSEdit.","nro":3,"url":"images/cnvimage100.png","index":1,"caption_template":"Image _PAGE_LEVEL_._PAGE_IMAGE_NUMBER_ - _CAPTION_","label":"The main window of VSEdit.","attributes":{},"skip":false,"key":"2.1.1"},{"backlink":"encoding/preparation.html#fig2.1.2","level":"2.1","list_caption":"Figure: A Jupyter Notebook.","alt":"A Jupyter Notebook.","nro":4,"url":"images/cnvimage101.png","index":2,"caption_template":"Image _PAGE_LEVEL_._PAGE_IMAGE_NUMBER_ - _CAPTION_","label":"A Jupyter Notebook.","attributes":{},"skip":false,"key":"2.1.2"},{"backlink":"encoding/video-artifacts.html#fig2.3.1","level":"2.3","list_caption":"Figure: Rakudai-Kishi-no-Cavalry-ep.01.png","alt":"Rakudai-Kishi-no-Cavalry-ep.01.png","nro":5,"url":"images/3cnvimage100.png","index":1,"caption_template":"Image _PAGE_LEVEL_._PAGE_IMAGE_NUMBER_ - _CAPTION_","label":"Rakudai-Kishi-no-Cavalry-ep.01.png","attributes":{},"skip":false,"key":"2.3.1"},{"backlink":"encoding/video-artifacts.html#fig2.3.2","level":"2.3","list_caption":"Figure: Have I been staring at my monitor for too long?","alt":"Have I been staring at my monitor for too long?","nro":6,"url":"images/3cnvimage101.png","index":2,"caption_template":"Image _PAGE_LEVEL_._PAGE_IMAGE_NUMBER_ - _CAPTION_","label":"Have I been staring at my monitor for too long?","attributes":{},"skip":false,"key":"2.3.2"},{"backlink":"encoding/video-artifacts.html#fig2.3.3","level":"2.3","list_caption":"Figure: notevenonce.jpg","alt":"notevenonce.jpg","nro":7,"url":"images/3cnvimage102.png","index":3,"caption_template":"Image _PAGE_LEVEL_._PAGE_IMAGE_NUMBER_ - _CAPTION_","label":"notevenonce.jpg","attributes":{},"skip":false,"key":"2.3.3"},{"backlink":"encoding/video-artifacts.html#fig2.3.4","level":"2.3","list_caption":"Figure: Blocky Compression","alt":"Blocky Compression","nro":8,"url":"images/blocky2.png","index":4,"caption_template":"Image _PAGE_LEVEL_._PAGE_IMAGE_NUMBER_ - _CAPTION_","label":"Blocky Compression","attributes":{},"skip":false,"key":"2.3.4"},{"backlink":"encoding/video-artifacts.html#fig2.3.5","level":"2.3","list_caption":"Figure: Blocky Exaggeration","alt":"Blocky Exaggeration","nro":9,"url":"images/blocky1.jpg","index":5,"caption_template":"Image _PAGE_LEVEL_._PAGE_IMAGE_NUMBER_ - _CAPTION_","label":"Blocky Exaggeration","attributes":{},"skip":false,"key":"2.3.5"},{"backlink":"encoding/video-artifacts.html#fig2.3.6","level":"2.3","list_caption":"Figure: Mosquito Noise","alt":"Mosquito Noise","nro":10,"url":"images/mosquito1.png","index":6,"caption_template":"Image _PAGE_LEVEL_._PAGE_IMAGE_NUMBER_ - _CAPTION_","label":"Mosquito Noise","attributes":{},"skip":false,"key":"2.3.6"},{"backlink":"encoding/video-artifacts.html#fig2.3.7","level":"2.3","list_caption":"Figure: field-noise.jpg","alt":"field-noise.jpg","nro":11,"url":"images/3cnvimage103.png","index":7,"caption_template":"Image _PAGE_LEVEL_._PAGE_IMAGE_NUMBER_ - _CAPTION_","label":"field-noise.jpg","attributes":{},"skip":false,"key":"2.3.7"},{"backlink":"typesetting/aegisub.html#fig3.1.1","level":"3.1","list_caption":"Figure: Aegisub 8975-master-8d77da3 preferences 1","alt":"Aegisub 8975-master-8d77da3 preferences 1","nro":12,"url":"images/preferences-1.png","index":1,"caption_template":"Image _PAGE_LEVEL_._PAGE_IMAGE_NUMBER_ - _CAPTION_","label":"Aegisub 8975-master-8d77da3 preferences 1","attributes":{},"skip":false,"key":"3.1.1"},{"backlink":"typesetting/aegisub.html#fig3.1.2","level":"3.1","list_caption":"Figure: Aegisub 8975-master-8d77da3 preferences 2","alt":"Aegisub 8975-master-8d77da3 preferences 2","nro":13,"url":"images/preferences-2.png","index":2,"caption_template":"Image _PAGE_LEVEL_._PAGE_IMAGE_NUMBER_ - _CAPTION_","label":"Aegisub 8975-master-8d77da3 preferences 2","attributes":{},"skip":false,"key":"3.1.2"},{"backlink":"typesetting/aegisub.html#fig3.1.3","level":"3.1","list_caption":"Figure: Aegisub 8975-master-8d77da3 preferences 3","alt":"Aegisub 8975-master-8d77da3 preferences 3","nro":14,"url":"images/preferences-3.png","index":3,"caption_template":"Image _PAGE_LEVEL_._PAGE_IMAGE_NUMBER_ - _CAPTION_","label":"Aegisub 8975-master-8d77da3 preferences 3","attributes":{},"skip":false,"key":"3.1.3"},{"backlink":"typesetting/aegisub.html#fig3.1.4","level":"3.1","list_caption":"Figure: Aegisub 8975-master-8d77da3 script properties 1","alt":"Aegisub 8975-master-8d77da3 script properties 1","nro":15,"url":"images/script_properties-1.png","index":4,"caption_template":"Image _PAGE_LEVEL_._PAGE_IMAGE_NUMBER_ - _CAPTION_","label":"Aegisub 8975-master-8d77da3 script properties 1","attributes":{},"skip":false,"key":"3.1.4"}]},"gitbook":"*"},"file":{"path":"encoding/masking-limiting-etc.md","mtime":"2019-02-23T14:44:57.210Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-02-23T14:45:55.567Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-term/clipboard.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-term/initclip.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-term/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

